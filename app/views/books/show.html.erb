<div class='container px-5 px-sm-0'>
   <div id="error_explanation">
        <% if @book.errors.any? %>
            <h3><%= @book.errors.count %>errors prohibited this obj from being saved:</h3>
            <ul><% @book.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
            </ul>
          <% end %>
        </div>
  <div class="row">



<%= render 'users/list', user:@book_user %>

<div class="col-md-8 offset-md-1">
      <h2>Book detail</h2>
      <table class="table table-hover table-inverse">

      <tbody>

      <tr>
        <td><%= link_to user_path(@book_user) do %>
        <%= attachment_image_tag @book_user, :profile_image, fallback: "no_image.jpg", size: "40x40"  %>
        </br>
        <%= @book_user.name %>
        <% end %>
        </td>

        <td><%= link_to @book.title, book_path(@book), class: 'book_id' %></td>
        <td><%= @book.body %></td>

        <!--いいね機能の追加-->
        <!--ログインユーザーがFavoritesテーブルに存在するか判定-->
        <% if @book.favorited_by?(current_user) %>
          <td>
            <!--存在すれば♥とその数を表示。linkを押せばテーブルから削除-->
            <%= link_to book_favorites_path(@book), method: :delete do %>
              ♥<%= @book.favorites.count %>
            <% end %>
          </td>
          <% else %>
          <td>
            <!--存在しなければ♡とテーブルに登録された数を表示。linkを押せばテーブルに登録-->
            <%= link_to book_favorites_path(@book), method: :post do %>
              ♡<%= @book.favorites.count %>
            <% end %>
          </td>
        <% end %>

        <!--この本を登録したユーザーとログインしているユーザーが一緒なら、EditとDestroyを表示-->
        <% if @book_user.id == current_user.id %>
          <td><%= link_to "Edit", edit_book_path(@book), class: "btn btn-sm btn-success" %></td>
          <td><%= link_to "Destroy", book_path(@book), method: :delete, data: {confirm: "本当に消しますか？"}, class: "btn btn-sm btn-danger" %></td>
        <% end %>

      </tr>


  </tbody>
</table>
    </div>


</div>
</div>